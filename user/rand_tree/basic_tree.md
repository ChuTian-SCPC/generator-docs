树和图共同的部分参考[树和图基础](/user/rand_tree/basic_tree_graph.md)。

### 树共同的成员变量

- `node_count`：树的结点数。

- `begin_node`：结点编号起始值。

- `is_rooted`：是否是有根树，默认为`false`。

- `root`：树的根结点是第几个结点，范围为$[0, node\_count)$，只有在有根树时才有效。

- `node_indices`：结点编号，默认为$[begin\_node, node\_count + begin\_node]$。

- `nodes_weight_function`：生成点权的函数，只有在有点权时才有效。

- `edges_weight_function`：生成边权的函数，只有在有边权时才有效。

- `edges`：树的边。

- `nodes_weight`：树的点权，只有在有点权时才有效。

- `swap_node`：在输出时候是否会随机交换结点顺序。对有根树，默认为`false`，即始终保持`father son`的格式；对无根树，默认为`true`。

- `output_node_count`：在输出时是否输出结点数，默认为`true`。

- `output_root`：在输出时是否输出根结点，只有在有根树的情况下才有效，默认为`true`。

以上变量基本可以通过[获取与设置](/user/tools/setter_getter.md)中的方法使用，需要特别注意的有：

#### `root`

`root`的setter传入的值表示是第几个结点为根结点，为了符合语义习惯，范围为$[1,node\_count]$，但是实际存储的时候会减$1$。

`root`在实际存储时表示的是结点编号的下标。

但是它常规的getter返回的值是结点编号，也就是`node_indices[root]`。

使用`ref`返回的则是`root`本身，要注意它们的区别。

比如对于一棵有$5$个结点的有根树，结点编号为$\{2,3,4,5,6\}$。

我想要设置根是结点编号为$2$的结点，那我应该使用`set_root(1)`。既不是`set_root(2)`，也不是`set_root(0)`。

因为编号为$2$的结点是树的**第一个**结点，而不是**第零个**结点，即使它在实际存储中的值为$0$。

我想要获取这个根结点的编号，那我应该使用`root()`，这样就可以直接得到$2$。

如果使用了`root_ref()`，那得到的就是实际存储的值$0$。

#### `edges`

`edges`常规的getter返回的是边的信息，是已经将结点转换成结点编号的情况。

使用`ref`返回的则是边的引用，是未转换的情况。

`edges`在实际存储的值表示的是结点编号的下标。

比如对于一棵有$5$个结点的树，结点编号为$\{1,2,3,4,5\}$，`edges`实际存储的格式为:

```
0 1
1 2
2 3
3 4
```

这也是使用`edges_ref()`返回的情况，而用`edges()`则会将其转换后作为返回值:

```
1 2
2 3
3 4
4 5
```

#### `edges`和`nodes_weight`

[树和图的点权和边](/user/rand_tree/basic_tree_graph.md#点权和边)中说明了这两个值只能获取，不能设置，虽然可以通过`ref`获得它的引用，但是在不清楚的情况下最好不要这么做。

### 输出格式

所有的树的通用输出格式为:

第一行一个正整数$n$表示树的结点树，如果`output_node_count`为`false`，则不输出。

对于有根树，以及`output_root`为`true`的情况，第一行一个正整数$r$表示树的根结点编号。如果输出了$n$，则$n$和$r$之间用一个空格隔开。

如果有点权，接下来一行输出$n$个点权$v$，之间以一个空格隔开。

$v$的输出格式以[_Node输出格式](/user/rand_tree/node_edge.md#输出格式)为准，你可以自定义输出格式。

接下来$n-1$行，每行两个正整数$u,v$，以及在有边权的情况下一个边权$w$，表示$u$和$v$之间有一条边，边权为$w$。

$u$，$v$和$w$输出格式以[_Edge输出格式](/user/rand_tree/node_edge.md#e8be93e587bae6a0bce5bc8f-1)为准，你可以自定义输出格式。

### 生成算法

对于单纯的使用来说，并不需要详细了解生成使用的算法。

如果你想要详细了解生成使用的算法，可以参考[开发者手册：树的随机算法](/developer/algorithm/tree.md)